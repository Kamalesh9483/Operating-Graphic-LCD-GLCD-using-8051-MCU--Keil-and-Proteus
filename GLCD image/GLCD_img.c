#include <reg51.h>

// Data port
#define displayPort P2 		// Note while using P0 use a pull up resistor
													// while P2 has internal pull up and dont need any eternal pull ups
// Other port config
sbit RS = P3^5;
sbit RW = P3^6;
sbit EN = P3^1;
sbit CS1 = P3^3;
sbit CS2 = P3^2;
sbit RST = P3^4;

// Function prototype
void Delay(unsigned int time);
void glcd_init();
void glcd_command(unsigned char command);
void pagePos(unsigned char X );
void colPos(unsigned char Y);
void Data(unsigned char dot);
void Image_dis(const char* pointer);


// Note: Refer data sheet for Display control instructions
// function for delay
void Delay(unsigned int time)
{
	int i, j;
	for (i=0; i<time; i++)
	{
		for (j=0; j<1275; j++){}	
	}
}
/********************************************************************************************************/
// Function to initialize function
void glcd_init()
{
	CS1 = 1;									// activating 1st half display
	CS2 = 1;
	RW = 0;										// RW is set ro low to select write operation									// activating 2nd half display
	//RST = 1;									// RST = 1 indicates system is being initialized

	glcd_command(0x3F);				// 0x3F means 00111111 - (DB7 to DB0) -- to turn on the display
	glcd_command(0x40);				// 0x40 means 01000000 - (DB7 to DB0) -- Y address (column = 0)
	glcd_command(0xB8);				// 0xB8 means 10111000 - (DB7 to DB0)	-- X address (page no = 0)
	glcd_command(0xC0);				// 0xC0 means 11000000 - (DB7 to DB0) -- X sub position address (line start = 0)
	
}
/********************************************************************************************************/
// Function to pass Initilization commands
void glcd_command(unsigned char command)
{
	RS = 0;										// RS is set ro low to select command register
	
	displayPort = command;
	EN = 1;										// Make High to low transistion with delay inbetween
	Delay(10);
	EN = 0;
}
/********************************************************************************************************/
// Function to activate X sub position Data registers	
void Data(unsigned char dot)
{
		RS = 1;										// RS is set to high to select Data register
		//RW = 0;										// RW is set to low to select write opeartion
		displayPort = dot;
		EN = 1;
		Delay(1);
		EN = 0;
}
/************************************************************************************************************/
// Image coordinates
code char pic[1024] = {
0x00,0xE0,0xF0,0xF8,0xFC,0xFE,0xFF,0xFE,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
0xFF,0xFF,0xFF,0xFE,0xFE,0xFD,0xFE,0xFC,0xF8,0xF0,0xE0,0xE0,0x80,0x80,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x10,0x9C,
0x16,0x0B,0x10,0x30,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x0C,0x01,0x01,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x00,0x00,0x14,0x00,0x00,0x02,
0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,

0x05,0x3F,0xFF,0xFF,0xFF,0xFF,0x3F,0x1F,0x1F,0x1F,0x1F,0x07,0x07,0x0F,0x0F,0x0F,
0x1F,0x3F,0x2F,0x0F,0x0F,0x1F,0x1F,0x1F,0xBF,0x7F,0x7F,0xFF,0xFF,0xFF,0x78,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x00,0x78,0x83,
0x60,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x08,0x04,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x80,0x80,0x80,0x80,0x00,0x00,
0x80,0x00,0x00,0x30,0x10,0x08,0x04,0x02,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,

0x00,0x00,0x01,0x03,0x0F,0x03,0x00,0x04,0x06,0x0F,0x0F,0x0F,0x0E,0x0E,0x0C,0x0C,
0x08,0x00,0x00,0x20,0x70,0x30,0x18,0x38,0x19,0x78,0x78,0xFF,0x13,0x01,0x00,0x02,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xC0,
0xF0,0xF8,0xF8,0xFC,0xFC,0xFC,0xFE,0xFC,0xFC,0xFC,0xFC,0xF8,0xF8,0xF0,0xC0,0x00,
0x00,0x00,0x00,0x00,0x00,0xC0,0xFE,0x7F,0x7F,0x37,0xC7,0x07,0x07,0x07,0x07,0x0F,
0x7F,0x1C,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0xC0,0xC0,0xC0,0xC0,0xE0,0xC0,
0xC0,0xC0,0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0xC0,0xE0,0xF0,0xF0,
0xF8,0xF8,0xFC,0xFC,0xFC,0xF4,0xF0,0xE0,0xC0,0xE0,0x00,0x80,0x00,0x00,0x00,0x00,

0x00,0x00,0x00,0x00,0x00,0x80,0x80,0x00,0x00,0x00,0x40,0x70,0x30,0x70,0x10,0x11,
0x18,0x18,0x10,0x38,0xF8,0xF0,0xE0,0xE0,0xC0,0x60,0x00,0x01,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x04,0x00,0x80,0x80,0x80,0x00,0x00,0x00,0x00,0xC0,0x7F,
0x0F,0x7B,0x31,0x21,0x01,0x81,0x01,0x01,0x01,0x43,0x03,0x03,0x07,0xFF,0x3F,0xC0,
0xC0,0xC0,0xC0,0xC0,0xF0,0xF1,0x07,0x34,0x6C,0x44,0x44,0x28,0x08,0x10,0x00,0x01,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFF,0xFF,0xFF,0x3F,0x27,0xC7,0xC7,0x8F,
0x0F,0x7F,0xFF,0xFF,0x3C,0x00,0x00,0x00,0x00,0x00,0xFF,0xBF,0xFF,0xFF,0xFF,0x7F,
0x7F,0x1D,0xC9,0x01,0x11,0x03,0x03,0x03,0x03,0x03,0x07,0x07,0x8E,0xDE,0x04,0x00,

0xEC,0xD0,0x90,0xE0,0xE2,0xE4,0xC9,0x93,0xE7,0xEF,0x9E,0x3C,0x32,0x7A,0xF9,0xF0,
0xE0,0xF0,0xF2,0xFE,0xFF,0xFF,0xFF,0xFF,0xF8,0xF0,0xE0,0x00,0x00,0x00,0x00,0x80,
0xF8,0xFC,0xF0,0x3C,0x3E,0x3E,0xA0,0x80,0xF1,0xF1,0xC0,0xC0,0xE0,0xE0,0xF1,0xFE,
0xE0,0xC0,0x98,0x10,0x02,0x00,0x00,0x00,0x80,0x80,0xC0,0xE0,0xF8,0xF2,0xFF,0xFF,
0xFF,0xFF,0xFF,0xFF,0xFF,0xFD,0xF0,0xF0,0xF0,0xF0,0xFE,0xFF,0xFF,0xFF,0xFF,0xFE,
0xFC,0xF8,0xF0,0xF0,0x80,0x00,0x00,0x00,0x3D,0x7D,0xED,0xE8,0xE8,0xF9,0xE0,0xF0,
0x60,0x20,0x07,0x04,0x00,0x00,0x00,0x00,0x00,0x07,0x3F,0xFE,0xF7,0xE3,0xF7,0x6D,
0x6E,0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x04,0x04,0x00,

0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xDF,0xED,0xBF,0xFB,0xEF,0xFF,0xFF,
0xFB,0xD1,0x9C,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xE0,0xE0,0xF0,0xFD,
0xFC,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
0xF1,0xC1,0x83,0x03,0x06,0x06,0x87,0xC3,0xFB,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
0xFF,0xFF,0xF7,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xBF,0x7F,
0x7F,0xFF,0xFF,0xFF,0xFF,0x38,0x0C,0x00,0x00,0x08,0x07,0x03,0x03,0x01,0x00,0x00,
0x00,0x00,0x00,0x40,0x80,0x80,0x00,0x00,0x00,0x00,0x00,0x81,0x87,0x1F,0xFF,0xEF,
0x60,0x60,0x40,0x00,0x00,0x21,0x00,0x00,0x00,0x80,0x40,0x20,0x00,0x00,0x00,0x00,

0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
0xFF,0xFF,0xFF,0xFF,0xF7,0xF7,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
0xFF,0xFF,0xFF,0xFF,0xFF,0x7F,0x7F,0x7F,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
0xFF,0xFF,0xFF,0xFF,0xFE,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
0xFF,0xFF,0xFF,0xF3,0x77,0xE7,0x8F,0x0F,0x1F,0xFF,0xFF,0xFF,0xFF,0xFE,0xFD,0xFD,
0xFD,0xFE,0xFF,0x3F,0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x94,0xFE,0xFE,0x3F,0x0F,0xC1,0xF8,0xFC,0xCE,0x07,0x03,0x01,0x00,0xFC,0xFF,0x7F,
0x7F,0x3F,0x9E,0x8C,0xE4,0xF4,0xF8,0xFC,0xFE,0xFE,0xFF,0xFF,0xFF,0xFF,0x7F,0x3E,

0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0x7F,0xFF,0xFF,0xFF,0xFF,0x9F,0xFF,0xFF,0xFF,0xFF,
0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0x9F,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFE,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
0xFF,0xFF,0xFF,0xFF,0xFE,0xFE,0xFE,0xFF,0xFE,0xFF,0xFF,0xFF,0xFF,0xFF,0x0F,0x07,
0x07,0x01,0x30,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xC0,
0x07,0x0F,0x10,0x02,0xFE,0x7F,0x03,0x01,0x00,0x00,0x80,0x00,0xC0,0x23,0x09,0x26,
0x10,0xEA,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0x3F,0x0F,0x07,0x01,0x00,0x00,0x00
};
	













/************************************************************************************************************/
/** Function to display image**/
void Image_dis(unsigned char* pointer)
{
	float pgIncrement = 0.5;
	int page;
	int column;
	int k = 0;
	CS1 = 1; 
	CS2 = 0;

	for (page = 0; page < 16; page++)
	{
		for (column = 0; column <64; column++)
		{
			Data(pointer[column + k]);
		}
		CS1 = ~CS1;
		CS2 = ~CS2;
		glcd_command(0xB8 + pgIncrement);
		pgIncrement = pgIncrement + 0.5;
		k = k + 64;
	}
	glcd_command(0x40);
	glcd_command(0xB8);
}

/***********************************************************************************************************/
// Main function
void main()
{
	RST = 1;
	glcd_init();
	while(1)
		{
				Image_dis(&pic[0]);
				//Delay(100);
	
		}
}